#!/usr/bin/env ruby
# frozen_string_literal: true

# Simple CLI entry point for the Rails SaaS Starter Template
require 'fileutils'
require 'json'
require 'pathname'

# Ensure lib directory is in load path
lib_path = File.expand_path('../lib', __dir__)
$LOAD_PATH.unshift(lib_path) unless $LOAD_PATH.include?(lib_path)

# Load the modular Synth CLI
require 'synth/cli'

# Start the CLI with error handling
begin
  Synth::CLI.start(ARGV)
rescue => e
  puts "‚ùå Error: #{e.message}"
  if ARGV.include?('--verbose') || ARGV.include?('-v')
    puts "Stack trace:"
    puts e.backtrace.join("\n")
  else
    puts "Run with --verbose for detailed error information"
  end
  exit 1
end