<!-- Documentation layout inspired by Syntax TailwindUI -->
<div class="bg-white">
  <!-- Navigation header -->
  <div class="fixed inset-x-0 top-0 z-50 flex h-14 items-center justify-between border-b border-gray-200 bg-white px-4 transition sm:px-6 lg:left-72 lg:z-30 lg:px-8 xl:left-80">
    <div class="flex items-center gap-5 lg:hidden">
      <button type="button" class="-m-3 p-3 md:hidden" aria-label="Toggle navigation">
        <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke="currentColor" class="h-6 w-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <ol role="list" class="ml-4 flex text-sm leading-6 whitespace-nowrap min-w-0">
        <li class="flex items-center">
          Rails SaaS Starter
          <svg width="3" height="6" aria-hidden="true" class="ml-3 overflow-visible text-gray-400">
            <path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
          </svg>
        </li>
        <li class="font-semibold text-gray-900 truncate">
          <%= @doc_content ? @doc_content[:title] : "Documentation" %>
        </li>
      </ol>
    </div>
    <div class="flex items-center gap-5">
      <nav class="hidden md:block">
        <ul role="list" class="flex items-center gap-8">
          <li>
            <a class="text-sm leading-5 text-gray-600 hover:text-gray-900" href="/">Home</a>
          </li>
          <li>
            <a class="text-sm leading-5 text-gray-600 hover:text-gray-900" href="/docs">Documentation</a>
          </li>
          <li>
            <a class="text-sm leading-5 text-gray-600 hover:text-gray-900" href="https://github.com/mitchellfyi/rails-starter">GitHub</a>
          </li>
        </ul>
      </nav>
      <div class="hidden min-[416px]:contents">
        <a class="group flex items-center gap-2 text-sm leading-5 text-gray-600 hover:text-gray-900" target="_blank" rel="noreferrer" href="https://github.com/mitchellfyi/rails-starter">
          <svg viewBox="0 0 16 16" aria-hidden="true" class="h-4 w-4 fill-current">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
          </svg>
          GitHub
        </a>
      </div>
    </div>
  </div>

  <!-- Sidebar -->
  <div class="hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-40 lg:block lg:w-72 lg:overflow-y-auto lg:bg-gray-50/75 lg:backdrop-blur-sm xl:w-80">
    <div class="hidden lg:flex lg:flex-col">
      <div class="flex flex-col gap-4 px-6 pt-4">
        <a class="flex items-center gap-2" href="/">
          <div class="flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600">
            <svg class="h-5 w-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
          </div>
          <div class="text-sm font-semibold text-gray-900">Rails SaaS Starter</div>
        </a>
      </div>
      
      <!-- Search -->
      <div class="px-6 pt-4">
        <div class="group relative">
          <svg width="20" height="20" fill="currentColor" class="absolute inset-y-0 left-3 h-full w-5 text-gray-400" aria-hidden="true">
            <path d="m19 19-3.5-3.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
            <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></circle>
          </svg>
          <input placeholder="Find something..." class="block w-full appearance-none rounded-lg bg-white py-[calc(theme(spacing.2)-1px)] pl-[calc(theme(spacing.10)-1px)] pr-[calc(theme(spacing.4)-1px)] text-base text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm" type="text">
        </div>
      </div>

      <!-- Navigation -->
      <nav class="lg:mt-6 lg:px-6">
        <div class="lg:mt-4">
          <% @sidebar_sections.each do |section| %>
            <div class="relative mt-6 lg:mt-8">
              <div class="absolute inset-x-0 top-0 bg-gray-50/90 backdrop-blur-sm lg:bg-transparent lg:backdrop-blur-none">
                <div class="mx-4 lg:mx-0">
                  <div class="flex h-8 items-center border-b border-gray-900/5 lg:border-none">
                    <h2 class="text-xs font-semibold text-gray-900">
                      <%= section[:title] %>
                    </h2>
                  </div>
                </div>
              </div>
              <div class="mt-8 lg:mt-4">
                <ul role="list" class="border-l border-gray-200">
                  <% section[:items].each do |item| %>
                    <li class="relative">
                      <a href="/docs/<%= item[:path] %>" class="<%= @doc_path == item[:path] ? 'font-semibold text-indigo-600 before:bg-indigo-600' : 'text-gray-700 hover:text-gray-900 before:bg-gray-200' %> flex w-full items-center pl-3.5 before:pointer-events-none before:absolute before:-left-px before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full">
                        <div class="absolute inset-0"></div>
                        <%= item[:name] %>
                      </a>
                    </li>
                  <% end %>
                </ul>
              </div>
            </div>
          <% end %>
        </div>
      </nav>
    </div>
  </div>

  <!-- Main content -->
  <div class="lg:pl-72 xl:pl-80">
    <div class="mx-auto max-w-3xl pt-14 xl:ml-0 xl:mr-[15.5rem] xl:max-w-none xl:pr-16">
      <main class="px-4 py-16 sm:px-6 lg:px-8">
        <% if @doc_content %>
          <article class="prose prose-gray max-w-none">
            <%= simple_format(markdown_to_html(@doc_content[:raw_content])) %>
          </article>
        <% else %>
          <!-- Default documentation index -->
          <div class="mx-auto max-w-2xl">
            <header class="mb-9 space-y-1">
              <p class="font-display text-sm font-medium text-indigo-600">Documentation</p>
              <h1 class="font-display text-3xl tracking-tight text-gray-900">
                Rails SaaS Starter Template
              </h1>
              <p class="text-lg text-gray-700">
                A fully-featured template for building AI-native SaaS applications on top of Rails Edge. 
                This documentation covers all the modules and features available.
              </p>
            </header>

            <div class="mb-16 mt-12 grid grid-cols-1 gap-6 sm:grid-cols-2">
              <% @doc_sections.each do |section| %>
                <div class="group relative rounded-xl border border-gray-200 dark:border-gray-800">
                  <div class="absolute -inset-px rounded-xl border-2 border-transparent opacity-0 [background:linear-gradient(var(--quick-links-hover-bg,theme(colors.sky.50)),var(--quick-links-hover-bg,theme(colors.sky.50)))_padding-box,linear-gradient(to_top,theme(colors.indigo.400),theme(colors.cyan.400),theme(colors.sky.500))_border-box] group-hover:opacity-100 dark:[--quick-links-hover-bg:theme(colors.slate.800)]"></div>
                  <div class="relative overflow-hidden rounded-xl p-6">
                    <svg aria-hidden="true" viewBox="0 0 32 32" fill="none" class="h-8 w-8">
                      <defs>
                        <linearGradient id="<%= section[:title].parameterize %>-gradient" x1="14" y1="14.5" x2="7" y2="17" gradientUnits="userSpaceOnUse">
                          <stop stop-color="#737373"></stop>
                          <stop offset="1" stop-color="#D4D4D8" stop-opacity="0"></stop>
                        </linearGradient>
                      </defs>
                      <circle cx="16" cy="16" r="16" fill="url(#<%= section[:title].parameterize %>-gradient)" fill-opacity="0.3"></circle>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="m5 16 4-4 11 11L9 12l7 7-4 4Z" fill="white"></path>
                    </svg>
                    <h2 class="mt-4 font-display text-base text-gray-900">
                      <a href="/docs/<%= section[:items].first[:path] if section[:items].any? %>">
                        <span class="absolute -inset-px rounded-xl"></span>
                        <%= section[:title] %>
                      </a>
                    </h2>
                    <p class="mt-1 text-sm text-gray-700">
                      <%= case section[:title]
                          when 'Getting Started'
                            'Setup, configuration, and basic usage guides'
                          when 'Architecture' 
                            'Technical documentation and system design'
                          when 'Modules'
                            'Feature modules and their capabilities'
                          when 'Implementation Guides'
                            'Detailed implementation documentation'
                          else
                            'Documentation and guides'
                          end %>
                    </p>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </main>
    </div>
  </div>
</div>

<% content_for :head do %>
  <script>
    // Simple markdown to HTML converter for client-side rendering
    function markdownToHtml(markdown) {
      return markdown
        .replace(/^### (.*$)/gim, '<h3>$1</h3>')
        .replace(/^## (.*$)/gim, '<h2>$1</h2>')
        .replace(/^# (.*$)/gim, '<h1>$1</h1>')
        .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
        .replace(/\*(.*)\*/gim, '<em>$1</em>')
        .replace(/\`(.*)\`/gim, '<code>$1</code>')
        .replace(/\n/gim, '<br>');
    }
  </script>
<% end %>